<ng-container *ngIf="isLoading; else elseBlock">
  <div class="center-align">
    <mz-spinner [color]="'blue'" [size]="'big'"></mz-spinner>
  </div>
</ng-container>

<ng-template #elseBlock>
  <ng-container *ngIf="!smallResolution">
    <div class="row">
      <button class="col s6 m1 l1 right blue darken-2" mz-button [disabled]="!swapView" mz-tooltip [tooltip]="'Lista'" [position]="'down'"
        [delay]="'200'" (click)="swapView=false">
        <i mz-icon-mdi [icon]="'format-list-numbers'"></i>
      </button>
      <button class="col s6 m1 l1 right blue darken-2" mz-button [disabled]="swapView" mz-tooltip [tooltip]="'Tabla'" [position]="'down'"
        [delay]="'200'" (click)="swapView=true">
        <i mz-icon-mdi [icon]="'table'"></i>
      </button>
    </div>
  </ng-container>

  <div class="row">
    <table class="bordered highlight col s12 m12 l12" *ngIf="swapView">
      <thead>
        <tr>
          <th>#</th>
          <th>Clave</th>
          <th>Tutor</th>
          <th>Carrera</th>
          <th>Generación</th>
          <th>Programa</th>
          <th></th>
        </tr>
      </thead>
      <tbody *ngFor="let section of sections">
        <tr>
          <td>{{section.number}}</td>
          <td>
            <a routerLink="./{{section.id}}">{{section.key}}</a>
          </td>
          <td>
            <a routerLink="/tutors/{{section.tutor_id}}" *ngIf="section.tutor">
              {{section.tutor.name | capitalize}} {{section.tutor.lastname | capitalize}} {{section.tutor.m_lastname | capitalize}}
            </a>
          </td>
          <td>{{section.carrer}}</td>
          <td>{{section.generation}}</td>
          <td>{{section.program}}</td>
          <td>
            <a (click)="deleteModal.open(); selectedSection=section">
              <span mz-tooltip [tooltip]="'Eliminar sección'" [position]="'down'" [delay]="200">
                <i [class]="'red-text'" mz-icon-mdi [icon]="'close'"></i>
              </span>
            </a>
          </td>
        </tr>
      </tbody>
    </table>

    <mz-collection class="col s12 m12 l12" *ngIf="!swapView">
      <mz-collection-item [avatar]="true" *ngFor="let section of sections">
        <div class="title">
          <a routerLink="./{{section.id}}">{{section.key}}</a>
        </div>
        <div>
          <a routerLink="/tutors/{{section.tutor_id}}" *ngIf="section.tutor">
            {{section.tutor.name | capitalize}} {{section.tutor.lastname | capitalize}} {{section.tutor.m_lastname | capitalize}}
          </a>
        </div>
        <div>
          <strong>Carrera: </strong>{{section.carrer}}
        </div>
        <div>
          <strong>Generación: </strong>{{section.generation}}
        </div>
        <div>
          <strong>Programa: </strong>{{section.program}}
        </div>
        <a mz-secondary-content (click)="deleteModal.open(); selectedSection=section">
          <span mz-tooltip [tooltip]="'Eliminar sección'" [position]="'down'" [delay]="200">
            <i [class]="'red-text'" mz-icon-mdi [icon]="'close'"></i>
          </span>
        </a>
      </mz-collection-item>
    </mz-collection>
  </div>
</ng-template>

<mz-modal #deleteModal [fixedFooter]="true" [bottomSheet]="true">
  <mz-modal-header>
    <div class="card-panel red white-text">¿Desea eliminar la sección?</div>
  </mz-modal-header>
  <mz-modal-content *ngIf="selectedSection">
    <h5>{{selectedSection.key}}</h5>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close (click)="delete()">Aceptar</button>
    <button mz-button [flat]="true" mz-modal-close>Cancelar</button>
  </mz-modal-footer>
</mz-modal>
