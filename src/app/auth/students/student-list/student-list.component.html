<ng-container *ngIf="isLoading; else elseBlock">
  <div class="center-align">
    <mz-spinner [color]="'blue'" [size]="'big'"></mz-spinner>
  </div>
</ng-container>

<ng-template #elseBlock>
  <ng-container *ngIf="!smallResolution">
    <div class="row">
      <button class="col s6 m1 l1 right blue darken-2" mz-button [disabled]="!swapView" mz-tooltip [tooltip]="'Lista'" [position]="'down'"
        [delay]="'200'" (click)="swapView=false">
        <i mz-icon-mdi [icon]="'format-list-numbers'"></i>
      </button>
      <button class="col s6 m1 l1 right blue darken-2" mz-button [disabled]="swapView" mz-tooltip [tooltip]="'Tabla'" [position]="'down'"
        [delay]="'200'" (click)="swapView=true">
        <i mz-icon-mdi [icon]="'table'"></i>
      </button>
    </div>
  </ng-container>

  <div class="row">
    <table class="bordered highlight col s12 m12 l12" *ngIf="swapView">
      <thead>
        <tr>
          <th></th>
          <th>Matrícula</th>
          <th>Nombre</th>
          <th>Sección</th>
          <th>Carrera</th>
          <th></th>
        </tr>
      </thead>
      <tbody *ngFor="let student of students">
        <tr>
          <td>
            <img class="table-avatar" mz-avatar src="assets/sidenav-demo-avatar.png" routerLink="./{{student.id}}">
          </td>
          <td>
            {{student.reg_number}}
          </td>
          <td>
            <a routerLink="./{{student.id}}">{{student.user.fullname | capitalize}}</a>
          </td>
          <td>{{student.section.key}}</td>
          <td>{{student.section.carrer}}</td>
          <td>
            <a (click)="deleteModal.open(); selectedStudent=student">
              <span mz-tooltip [tooltip]="'Eliminar alumno'" [position]="'down'" [delay]="200">
                <i [class]="'red-text'" mz-icon-mdi [icon]="'close'"></i>
              </span>
            </a>
          </td>
        </tr>
      </tbody>
    </table>

    <mz-collection class="col s12 m12 l12" *ngIf="!swapView">
      <mz-collection-item [avatar]="true" *ngFor="let student of students">
        <img mz-avatar src="assets/sidenav-demo-avatar.png" routerLink="./{{student.id}}">
        <div class="title">
          <a routerLink="./{{student.id}}">{{student.user.fullname | capitalize}}</a>
        </div>
        <div>
          <strong>#</strong>{{student.reg_number}}
        </div>
        <div>
          <strong>Sección: </strong>{{student.section.key}}
        </div>
        <div>
          <strong>Carrera: </strong>{{student.section.carrer}}
        </div>
        <a mz-secondary-content (click)="deleteModal.open(); selectedStudent=student">
          <span mz-tooltip [tooltip]="'Eliminar alumno'" [position]="'down'" [delay]="200">
            <i [class]="'red-text'" mz-icon-mdi [icon]="'close'"></i>
          </span>
        </a>
      </mz-collection-item>
    </mz-collection>
  </div>
</ng-template>

<mz-modal #deleteModal [fixedFooter]="true" [bottomSheet]="true">
  <mz-modal-header>
    <div class="card-panel red white-text">¿Desea eliminar el alumno?</div>
  </mz-modal-header>
  <mz-modal-content *ngIf="selectedStudent">
    <h5>{{selectedStudent.user.fullname}}</h5>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close (click)="delete()">Aceptar</button>
    <button mz-button [flat]="true" mz-modal-close>Cancelar</button>
  </mz-modal-footer>
</mz-modal>
